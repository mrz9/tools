{"version":3,"sources":["index.js"],"names":["_Popup","target","option","el","$uid","$map","status","hasInit","$opt","type","title","content","$","single","selectArr","extend","init","$init","callback","$callback","bind","prototype","getUid","add","item","uid","set","id","get","self","$origin","find","$selected","on","layer","open","shade","maxmin","shadeClose","area","btn","btnAlign","yes","index","layero","rs","each","i","push","close","success","idx","leftCreate","load","first","data","html","render","checkCheck","e","ignoreCheckAll","ignoreRender","preventDefault","_this","val","closest","disabled","prop","checked","p","children","pid","siblings","arrRemoveAll","objToArr","flag","input","length","is","arrRemove","checkboxs","trigger","parents","remove","match","_parent","hasClass","msg","removeClass","addClass","uitem","parent","suid","hasChildData","child","hasShowNext","is_child","name","is_checkbox","dclass","li","ck","size","ouid","oitem","attr","undefined","indexOf","splice","leftstr","$destory","fn","zPopup","window","instance"],"mappings":"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","file":"popup.bda9c846.map","sourcesContent":["/**\n * 弹窗插件，通用版 1.0 \n * 目前父节点全选并非子节点的全选，其他类型后续扩展\n * 约束：\n * 1. 插件接受的数据格式（必须包含）\n * {\n *   id: 1,\n *   name: 'xx',\n *   type: 'xxx', //表示改项的类型，用于区分节点，如果后端数据不需要区分类型，可以在过滤方法添加固定值该属性，要保证能区分各个节点\n *   is_child: 1|0, // 1表示有下一级，0表示5无下级\n *   disabled: 1|0, // 1表示有表示不可编辑，0或者没有改字段表示可编辑\n *   is_checkbox:boolean , //当type =2的情况下需要此参数判断是否未复选框，改字段由前端构建即可\n * }\n * \n * 2. 判断单前是否选中的规则\n * ‘type(_pid)?_id' //当前项的类型， 父节点的id（如果有的话），但前项目的id\n * \n * single:boolean, //配置是否未单选，默认false\n * \n * methods:\n * init(cb),  //设置初始化数据，需要构建符合插件的格式，通过cb传回给插件使用\n * load(param,cb), //加载更多数据，param参数提供需要与后端交互的数据，需要构建符合插件的格式，通过cb传回给插件使用\n * callback(rs) //点击保存后返回已选的数据到页面\n */\n;(function(){\n    function _Popup(target,option){\n        this.el = target;\n        this.$uid = 0;\n        this.$map = {};\n\n        //记录状态\n        this.status = {\n            hasInit:false,\n        }\n        //配置项目\n        this.$opt = {\n            /**\n             * 1: 父节点可选，但是非子节点的全选\n             * 2: 父节点不可选\n             */\n            type:1,\n            title:\"弹窗\",\n            content: $(\".z-popup\"),\n            single:false, //是否单选\n        }\n\n        //结果保存集合\n        this.selectArr = [];\n\n        $.extend(this.$opt,option);\n\n        if(this.$opt.init){\n            this.$init = this.$opt.init;\n        }\n\n        if(this.$opt.callback){\n            this.$callback = this.$opt.callback;\n        }\n\n        this.bind();\n    }\n    /**\n     * $map 操作集合\n     */\n    _Popup.prototype.getUid = function(){\n        return this.$uid++;\n    }\n    _Popup.prototype.add = function(item){\n        var uid = this.getUid();\n        return this.set(uid,item);\n    }\n    _Popup.prototype.set = function(id,item){\n        item.uid = id;\n        this.$map[id] = item;\n        return id;\n    }\n\n    _Popup.prototype.get = function(id){\n        return this.$map[id];\n    }\n\n    /**\n     * 绑定事件，主要ui逻辑在此方法处理\n     */\n    _Popup.prototype.bind = function(){\n        var self = this;\n        var $origin = $(this.$opt.content).find('.origin');\n        var $selected = $(this.$opt.content).find('.selected');\n        //绑定触发元素\n        $(this.el).on(\"click\",function(){\n            layer.open({\n                type: 1,\n                title: self.$opt.title,\n                shade: 0.3,\n                maxmin: true,\n                shadeClose: false,\n                area: ['780px','600px'],\n                content: self.$opt.content,\n                btn: ['保存', '关闭'],\n                btnAlign: 'c',\n                yes:function(index, layero){\n                    //成功回调\n                    var rs = [];\n                    $.each(self.selectArr,function(i,id){\n                        var item = self.get(id);\n                        if(item) rs.push(item);\n                    })\n                    typeof self.$callback == 'function' && self.$callback(rs);\n                    layer.close(index);\n                },\n                success: function () {\n                    if(!self.status.hasInit){\n                        //初始化操作\n                        self.status.hasInit = true;\n                        typeof self.$init== 'function' && self.$init(function(rs){\n                            //init 构建的uid一律为负数,注意需要构建match字段，通过此字段来确定是否勾选\n                            var idx = -2;\n                            $.each(rs,function(i,item){\n                                if(!self.$opt.single || i<1)\n                                self.selectArr.push(self.set(idx--,item));\n                            })\n                           \n                            leftCreate();\n                        });\n                        typeof self.$opt.load == 'function' && self.$opt.load({first:true},function(data){\n                            //渲染\n                            $origin.html(render(-1,data));\n                            //检查是否已勾选\n                            checkCheck($origin);\n                            \n                        });\n                    }\n                }\n            });\n        });\n\n        //单选\n        $origin.on(\"change\",\".check\",function(e,ignoreCheckAll,ignoreRender){\n            e.preventDefault();\n            \n            var _this = $(this),\n                id = _this.val(),\n                uid = _this.closest('li').data('uid');\n\n            var item = self.get(uid);\n            if(item.disabled){\n                $(this).prop('checked',!this.checked)\n                return false;\n            }\n\n            var p =_this.closest(\"ul\").children(\".checkall\").find(\"input\");\n            var pid = p.val();\n\n            var siblings = _this.closest('li').siblings('.child');\n            if(this.checked){\n                //单选时先把以选择的干掉\n                !ignoreRender && this.checked && self.$opt.single && arrRemoveAll(),$(this).prop('checked',true);\n                objToArr(uid);\n                if(!ignoreCheckAll){\n                    var flag = true;\n                    siblings.each(function(){\n                        var input = $(this).find('>label>input')\n                        if(input.length>0 && !input.is(':checked')){\n                            flag = false;\n                        }\n                    });\n                    p.prop('checked',flag);\n                }\n                \n            }else{\n                arrRemove(uid);\n                p.prop('checked',false);\n            }\n            !ignoreRender && leftCreate();\n        });\n\n        //展开下级\n        $origin.on(\"click\",\".get-next\",open);\n\n        //全选操作\n        $origin.on('change',\".checkall input\",function(){\n            //单选时不应该出现全选，防止一下还是加个return好\n            if(self.$opt.single) return false;\n\n            var checkboxs = $(this).closest('li').siblings(\".child\").find('>label>.check');\n            if(this.checked){\n                checkboxs.each(function(i){\n                    if(!this.checked){\n                        $(this).prop('checked',true).trigger('change',true);\n                    }\n                })\n            }else{\n                checkboxs.each(function(i){\n                    if(this.checked){\n                        $(this).prop('checked',false).trigger('change',true);\n                    }\n                })\n            }\n        });\n\n        //左侧删除\n        $selected.on(\"click\",\".fa-close\",function(){\n            var _this = $(this);\n            _this.parents(\"li\").remove();\n            var uid = _this.closest('li').data('uid');\n            var match = _this.closest('li').data('match');\n            arrRemove(uid);\n            $origin.find(\"[data-match='\"+match+\"']\").prop('checked',false).trigger('change');\n        });\n\n        //加载下一级数据\n        function open(){\n            var _this = $(this),\n                _parent = _this.closest(\"li\"),\n                uid = _parent.data('uid');\n            \n            if(_this.hasClass('load-empty')){\n                layer.msg('没有下级数据');\n                return false;\n            }\n\n            if(_parent.hasClass(\"open\")){\n                _parent.removeClass(\"open\");\n            }else{\n                //不关闭已展开的，感觉页面交互有点怪\n                // _parent.siblings(\"li\").removeClass(\"open\");\n                _parent.addClass(\"open\");\n\n            }\n            if(!_this.hasClass('load-done')){\n\n                var uitem = self.get(uid);\n                if(!uitem) return false;\n\n                typeof self.$opt.load == 'function' && self.$opt.load(uitem,function(data){\n                    if(!data.length){\n                        _this.addClass('load-empty');\n                        layer.msg('没有下级数据');\n                        return false;\n                    }\n                    var html = render(uid,data);\n                    if(html){\n                        _this.siblings(\"ul\").html( html);\n                        _this.addClass('load-done');\n                        checkCheck(_this.siblings('ul'));\n                    }\n                })\n            }else{\n                checkCheck(_this.siblings('ul'));\n            }\n        }\n\n        /**\n         * 渲染树\n         * @param {Int} uid 被插入节点的uid，如果没有上级则约定等于 -1\n         * @param {Array} data 数组\n         */\n        function render(uid,data){\n            var html= '';\n            if(data && data.length){\n                !self.$opt.single && (html += '<li class=\"checkall\"><label ><input type=\"checkbox\">全选</label></li>');\n                $.each(data,function(i,item){\n                    var match = item.type + '_' ;\n                    if(uid !== -1){//存在父级的情况\n                        var parent = self.get(uid);\n                        item.parent = parent;\n                        match += parent.id +'_'\n                    }\n                    match += item.id;\n                    item.match = match;\n                    var suid = self.add(item);\n                    html += '<li class=\"item child\" data-uid=\"'+suid+'\">';\n\n                    var hasChildData = item.child && item.child.length;\n                    var hasShowNext = item.is_child == 1 || hasChildData;\n                    \n                    switch(self.$opt.type){\n                        case 1:\n                            html += '<label ><input type=\"checkbox\" class=\"check\" value=\"'+item.id+'\" data-match=\"'+item.match+'\">'+item.name+'</label> ';\n                            if(hasShowNext){//有下一级的情况\n                                html +='<a href=\"javascript:;\" class=\"has-child2 get-next ' + (hasChildData ? 'load-done':'') +'\"></a><ul>'\n                                if(hasChildData){\n                                    html += render(suid,item.child);\n                                }\n                                html +='</ul></li>'\n                            }\n                            break;\n                        case 2:\n                            if(!item.is_checkbox){\n                                var dclass = !hasShowNext ? 'load-empty' : hasChildData ? 'load-done':'';\n                                html += '<a href=\"javascript:;\" class=\"has-child get-next ' + dclass +'\"><i class=\"fa popup-font\"></i>'+item.name+'</a>'\n                                if(hasShowNext){//有下一级的情况\n                                    html +='<ul>';\n                                    if(hasChildData){\n                                        html += render(suid,item.child);\n                                    }\n                                    html +='</ul></li>'\n                                }\n                            }else{\n                                html += '<label ><input type=\"checkbox\" '+ (!!item.disabled ? \"disabled\" : \"\") +' class=\"check\" value=\"'+item.id+'\" data-match=\"'+item.match+'\">'+item.name+'</label> ';\n                            }\n                            break;\n                    }\n                    \n                    \n                });\n            }\n            \n            return html;\n        }\n\n        /**\n         * 判断是否以加入数组中\n         * 检查勾选的规则是\n         * type(_pid)?_id\n         * 这种规则适合有type类型返回并且同级不可能存在类型和id相同，\n         * 或者不同级别的情况（此处就记录两级），不可能存在类型且上下两级的id同时相同的数据\n         */\n        function checkCheck(_this){\n            var li = $selected.find('ul>li');\n            li.each(function(){\n                var ck = _this.find('[type=checkbox][data-match=\"'+$(this).data('match')+'\"]');\n                if(ck.size()>0){\n                    var uid = ck.closest('li').data('uid');\n                    var ouid = $(this).data('uid');\n                    var oitem = self.get(ouid);\n                    var item = self.get(uid);\n                    \n                    $(this).attr('data-uid',uid);\n\n                    arrRemove(ouid);\n                    objToArr(uid);\n\n                    ck.prop('checked',true).trigger('change',[false,true]);\n                    if(typeof oitem.disabled !== undefined){\n                        item.disabled = oitem.disabled\n                        if(item.disabled){\n                            ck.prop('disabled',true);\n                        }\n                    }\n                }\n            })\n        }\n    \n         //del\n        function arrRemove(uid){\n            //不能用id删除，有可能id相同\n            var index = self.selectArr.indexOf(uid);\n            if(index!=-1)\n            self.selectArr.splice(index, 1)\n\n        }\n\n        //全删除\n        function arrRemoveAll(){\n            self.selectArr = [];\n            $origin.find(':checkbox').prop('checked',false);\n            leftCreate();\n        }\n\n        //push\n        function objToArr(uid){\n            var index = self.selectArr.indexOf(uid);\n            if(index == -1 ) self.selectArr.push(uid);\n        }\n        //左侧\n        function leftCreate(){\n            var leftstr = \"\";\n            $.each(self.selectArr,function(i,id){\n                var item = self.get(id);\n                leftstr += '<li class=\"left-item\" data-uid=\"'+item.uid+'\" data-match=\"'+ item.match+'\"><span>'+ (item.parent ? item.parent.name  + ' ' : '') + item.name + '</span>'+ (!item.disabled ? '<i class=\"fa fa-close\"></i>' : '') +'</li>'\n            })\n            $selected.find(\"ul\").html(leftstr);\n        }\n    }\n\n    /**\n     * 清楚所有数据，同时实例变成未初始化状态\n     */\n    _Popup.prototype.$destory = function(){\n        $(this.$opt.content).find('.origin>ul').html('');\n        $(this.$opt.content).find('.selected>ul').html('');\n        this.selectArr = [];\n        this.$map = {}\n        this.$uid = 0;\n        this.status.hasInit = false;\n    }\n\n    $.fn.zPopup = function(option){\n        //便于调试\n        window.zPopup = window.zPopup || [];\n        var instance = new _Popup(this,option);\n        window.zPopup.push(instance);\n        return instance;\n    }\n})();\n\n"]}