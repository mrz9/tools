webpackJsonp([1],{"/RdE":function(t,e){},"2bvp":function(t,e){},"4yEd":function(t,e,a){"use strict";function i(t){a("wKmI")}var n=a("LW4Y"),s=a("BeEy"),o=a("XyMi"),c=i,l=Object(o.a)(n.a,s.a,s.b,!1,c,"data-v-473562ee",null);e.a=l.exports},"6Gqv":function(t,e){},"7YoW":function(t,e){},"86PB":function(t,e,a){"use strict";var i=a("bOdI"),n=a.n(i),s=a("4OJq");a.n(s);e.a={components:n()({},s.DrawerLayout.name,s.DrawerLayout),data:function(){return{rightType:"home"}},mounted:function(){var t=this,e=function(e,a){var i=e||t.$router.currentRoute,n=i.name;t.rightType="list"==n||"home"==n?"search":"home"};this.$router.afterEach(e),e()},methods:{toggleDrawer:function(){this.$refs.drawer.toggle()}}}},"9nkg":function(t,e){},BeEy:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-good-edit"},[a("div",{staticClass:"cell-title"},[t._v("标题：")]),t._v(" "),a("van-field",{attrs:{type:"textarea",autosize:{maxHeight:100},placeholder:"输入商品标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}}),t._v(" "),a("div",{staticClass:"cell-title"},[t._v("现价：")]),t._v(" "),a("van-field",{attrs:{type:"number",placeholder:"现在购买价格"},model:{value:t.form.n_price,callback:function(e){t.$set(t.form,"n_price",e)},expression:"form.n_price"}}),t._v(" "),a("div",{staticClass:"cell-title"},[t._v("原价：")]),t._v(" "),a("van-field",{attrs:{type:"number",placeholder:"原价（不填则页面不显示原价）"},model:{value:t.form.o_price,callback:function(e){t.$set(t.form,"o_price",e)},expression:"form.o_price"}}),t._v(" "),a("div",{staticClass:"cell-title"},[t._v("商品分类：")]),t._v(" "),a("van-cell",{attrs:{"is-link":"",value:"点击修改"},on:{click:function(e){t.typeSelect.status=!0}}},[a("template",{slot:"title"},[a("span",{staticClass:"van-cell-text"},[t._v("当前分类")]),t._v(" "),a("van-tag",{directives:[{name:"show",rawName:"v-show",value:t.typeSelect.label,expression:"typeSelect.label"}],attrs:{plain:"",type:"primary"}},[t._v(t._s(t.typeSelect.label))])],1)],2),t._v(" "),a("div",{staticClass:"cell-title"},[t._v("规格类型：")]),t._v(" "),a("div",{staticClass:"type-group"},[t._l(t.form.tree,function(e,i){return a("div",{key:i,staticClass:"type-wrap van-contact-card"},[a("van-field",{attrs:{type:"text",placeholder:"分类名字",error:!e.name},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"item.name"}},[a("van-button",{attrs:{slot:"button",size:"mini",type:"danger"},on:{click:function(e){t.deleteTree(i)}},slot:"button"},[t._v("删除")])],1),t._v(" "),a("van-cell",{staticClass:"sub-list"},t._l(e.list,function(i,n){return a("van-tag",{key:n,attrs:{type:"primary"},on:{click:function(t){e.list.splice(n,1)}}},[t._v(t._s(i))])})),t._v(" "),a("van-field",{directives:[{name:"show",rawName:"v-show",value:e.name,expression:"item.name"}],attrs:{type:"text",placeholder:"请输入"+e.name+"规格",disabled:!e.name},on:{"click-icon":function(t){!!e.tag&&e.list.push(e.tag),e.tag=""}},model:{value:e.tag,callback:function(a){t.$set(e,"tag","string"==typeof a?a.trim():a)},expression:"item.tag"}},[a("div",{attrs:{slot:"icon"},slot:"icon"},[a("van-icon",{staticClass:"text-primary",attrs:{name:"add-o"}})],1)])],1)}),t._v(" "),a("van-cell",[a("a",{staticClass:"btn-outline btn-primary",attrs:{href:"javascript:;"},on:{click:t.treeAdd}},[t._v("添加")])])],2),t._v(" "),a("div",{staticClass:"cell-title"},[t._v("轮播图：")]),t._v(" "),a("van-cell-group",{staticClass:"upload-wrap"},[a("div",{staticClass:"flex-item"},[a("van-uploader",{staticClass:"add-img",attrs:{"after-read":t.imgRead}},[a("van-icon",{attrs:{name:"photograph"}})],1)],1),t._v(" "),t._l(t.form.thumbs,function(e,i){return a("div",{key:i,staticClass:"flex-item"},[a("div",{staticClass:"img",style:{"background-image":"url("+(e.startsWith("data:image")?e:t.baseUrl+e)+")"},on:{click:function(e){t.preview(t.form.thumbs,i)}}}),t._v(" "),a("van-icon",{staticClass:"btn-close",attrs:{name:"clear"},on:{click:function(e){t.form.thumbs.splice(i,1)}}})],1)})],2),t._v(" "),a("div",{staticClass:"cell-title"},[t._v("内容详情图片：")]),t._v(" "),a("van-cell-group",{staticClass:"upload-wrap"},[a("div",{staticClass:"flex-item"},[a("van-uploader",{staticClass:"add-img",attrs:{"after-read":t.contentImgRead}},[a("van-icon",{attrs:{name:"photograph"}})],1)],1),t._v(" "),t._l(t.form.content_thumbs,function(e,i){return a("div",{key:i,staticClass:"flex-item"},[a("div",{staticClass:"img",style:{"background-image":"url("+(e.startsWith("data:image")?e:t.baseUrl+e)+")"},on:{click:function(e){t.preview(t.form.content_thumbs,i)}}}),t._v(" "),a("van-icon",{staticClass:"btn-close",attrs:{name:"clear"},on:{click:function(e){t.form.content_thumbs.splice(i,1)}}})],1)})],2),t._v(" "),a("div",{staticClass:"cell-title"},[t._v("内容详情视频：")]),t._v(" "),a("van-cell-group",{staticClass:"upload-wrap"},[a("div",{staticClass:"flex-item"},[a("input",{attrs:{type:"file",name:"video"},on:{change:t.videoChange}}),t._v(" "),a("div",{staticClass:"add-img"},[a("van-icon",{attrs:{name:"play"}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!!t.form.video,expression:"!!form.video"}],staticClass:"flex-item"},[a("div",{staticClass:"video-wrap"},[a("van-icon",{attrs:{name:"play"}})],1),t._v(" "),a("van-icon",{staticClass:"btn-close",attrs:{name:"clear"},on:{click:t.clearVideo}})],1)]),t._v(" "),a("div",{staticClass:"cell-title"},[t._v("详情：")]),t._v(" "),a("van-field",{attrs:{type:"textarea",autosize:!0,placeholder:"输入商品描述"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}}),t._v(" "),a("div",{staticClass:"cell-title"},[t._v("是否发布商品：")]),t._v(" "),a("van-cell",[a("van-switch",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),a("div",{staticClass:"filed-wrap "},[a("van-button",{staticClass:"submit",attrs:{type:"primary",disabled:t.formStatus,loading:t.posting,block:""},on:{click:t.submit}},[t._v("提交")])],1),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.typeSelect.status,callback:function(e){t.$set(t.typeSelect,"status",e)},expression:"typeSelect.status"}},[a("van-tree-select",{attrs:{items:t.typeSelect.items,"main-active-index":t.typeSelect.mainActive,"active-id":t.typeSelect.activeId},on:{navclick:t.typeSelectNav,itemclick:t.typeSelectClick}})],1)],1)},n=[]},CyuY:function(t,e,a){"use strict";var i=a("GKy3"),n=(a.n(i),a("4vvA")),s=a.n(n),o=a("mtWM"),c=a.n(o);e.a={name:"type_edit",data:function(){return{posting:!1,popupShow:!1,typeLabel:"顶级分类",form:{name:"",pid:0},typeData:[{name:"顶级分类",id:0}]}},computed:{formStatus:function(){return!String(this.form.name).trim()}},mounted:function(){this.loadType()},methods:{loadType:function(){var t=this;s.a.loading({type:"loading",mask:!0,duration:0,forbidClick:!0,message:"正在获取分类信息"}),c.a.get("/admin/type/getTypes").then(function(e){var a=e.data;0==a.status?(t.typeData=t.typeData.concat(a.data.filter(function(t){return 0==t.pid})),s.a.clear()):s.a.fail(a.message)}).catch(function(t){s()({type:"text",message:"获取分类失败，请刷新页面"})})},onCancel:function(t){this.popupShow=!1},onConfirm:function(t){this.form.pid=t.id,this.typeLabel=t.name,this.popupShow=!1},reset:function(){this.form.name="",this.form.pid=0,this.typeLabel="顶级分类"},submit:function(){var t=this;this.posting=!0,c.a.post("/admin/type/create",this.form).then(function(e){var a=e.data;0==a.status?(s.a.success("添加成功"),t.reset()):s.a.fail(a.message),t.posting=!1}).catch(function(e){s.a.fail("请求错误"),t.posting=!1})}}}},DOfO:function(t,e){},"Fiu+":function(t,e){},GTFK:function(t,e){},"Hn/3":function(t,e){},HrUo:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-popup",{attrs:{position:"bottom"},model:{value:t.inject.status,callback:function(e){t.$set(t.inject,"status",e)},expression:"inject.status"}},[a("van-tree-select",{attrs:{items:t.inject.items,"main-active-index":t.mainActive,"active-id":t.activeId},on:{navclick:t.navSelect,itemclick:t.itemClick}})],1)},n=[]},L6DK:function(t,e){},LW4Y:function(t,e,a){"use strict";function i(t,e){var a=t.content,i=new Image,n=new Image;n.src=h,i.onload=function(){var a=document.createElement("canvas");a.width=this.width,a.height=this.height;var i=a.getContext("2d");i.drawImage(this,0,0),i.drawImage(n,10,10);var s=a.toDataURL(t.file.type,1);e(s)},i.onerror=function(){alert("转换图片失败")},i.src=a}var n=a("mvHQ"),s=a.n(n),o=a("i9vB"),c=(a.n(o),a("Mqtp")),l=a.n(c),r=a("fZjL"),u=a.n(r),d=a("GKy3"),v=(a.n(d),a("4vvA")),p=a.n(v),f=a("mtWM"),m=a.n(f),h="data:image/png;base64,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";e.a={name:"good_edit",data:function(){return{posting:!1,isUpdate:!1,baseUrl:"",typeSelect:{label:"",status:!1,items:[],mainActive:0,activeId:0},form:{title:"",n_price:"",o_price:"",content:"",thumbs:[],type:"",status:!1,content_thumbs:[],video:"",tree:[]}}},computed:{formStatus:function(){return!String(this.form.name).trim()}},mounted:function(){var t=this;console.log(this.$route.params),isNaN(this.$route.params.id)||(this.isUpdate=!0,m.a.get("/admin/good/find/"+this.$route.params.id).then(function(e){var a=e.data;0==a.status?(t.form.title=a.data.title,t.form.o_price=a.data.origin_price,t.form.n_price=a.data.new_price,t.form.content=a.data.content,t.form.type=a.data.type,t.form.status=1==a.data.status,t.form.thumbs=a.data.thumbs.split(","),t.form.content_thumbs=a.data.content_thumbs.split(","),t.form.video=a.data.video,t.form.tree=a.data.tree?JSON.parse(a.data.tree):[]):p()({type:"text",message:a.message})}).catch(function(t){console.log(t),p()({type:"text",message:"获取分类失败，请刷新页面"})})),this.loadType()},methods:{loadType:function(){var t=this;p.a.loading({type:"loading",mask:!0,duration:0,forbidClick:!0,message:"获取分类信息"}),m.a.get("/admin/type/getTypes").then(function(e){var a=e.data;if(0==a.status){var i=[],n={};a.data.forEach(function(t){0==t.pid?(n[t.id]||(n[t.id]={}),n[t.id].text=t.name,n[t.id].children=[]):(n[t.pid]||(n[t.pid]={},n[t.pid].children=[]),n[t.pid].children.push({id:t.id,text:t.name,pid:t.pid}))}),u()(n).forEach(function(t){i.push(n[t])}),t.typeSelect.items=i,t.typeSelectNav(0),p.a.clear()}else p.a.fail(a.message)}).catch(function(t){p()({type:"text",message:"获取分类失败，请刷新页面"})})},typeSelectNav:function(t){this.typeSelect.mainActive=t,this.typeSelect.activeId=this.typeSelect.items[t].children[0].id,this.typeSelect.label=this.typeSelect.items[t].children[0].text,this.form.type=this.typeSelect.items[t].children[0].id},typeSelectClick:function(t){this.typeSelect.activeId=t.id,this.typeSelect.label=t.text,this.form.type=t.id,this.typeSelect.status=!1},deleteTree:function(t){this.form.tree.splice(t,1)},treeAdd:function(){this.form.tree.push({name:"",list:[],tag:""})},preview:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l()(t.map(function(t){return t.startsWith("data:image")?t:e.baseUrl+t}),a)},imgRead:function(t){var e=this;i(t,function(t){e.form.thumbs.push(t)})},contentImgRead:function(t){var e=this;i(t,function(t){e.form.content_thumbs.push(t)})},videoChange:function(t){this.form.video=t.currentTarget.files[0],t.currentTarget.value=""},clearVideo:function(){this.form.video=""},reset:function(){this.posting=!1,this.form={title:"",type:"",tree:[],status:!1,n_price:"",o_price:"",content:"",thumbs:[],content_thumbs:[],video:""}},submit:function(){function t(t){var e=void 0,i=void 0,n=void 0;t.lengthComputable&&(e=t.total,i=t.loaded,n=Math.round(t.loaded/t.total*100)+"%",a.message=e==i?"数据处理中":"已上传 "+n)}var e=this;if(this.posting)return!1;var a=p.a.loading({type:"loading",mask:!0,duration:0,forbidClick:!0,message:"正在提交"});this.posting=!0;var i=new FormData;u()(this.form).forEach(function(t){var a=t,n=e.form[t];"[object Object]"==toString.call(n)||"[object Array]"==toString.call(n)?n="thumbs"==t||"content_thumbs"==t?n.join("_|_"):s()(n):"status"==t&&(n=n?1:0),i.set(a,n)}),this.isUpdate&&i.set("id",this.$route.params.id);var n=new XMLHttpRequest;n.responseType="json",n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var t=n.response;0==t.status?(p.a.success("成功"),e.reset()):p.a.fail(t.message),e.posting=!1}},n.upload.onprogress=t;var o="/admin/good/create";this.isUpdate&&(o="/admin/good/update/"+this.$route.params.id),n.open("POST",o),n.onerror=function(t){p.a.fail("请求错误"),e.posting=!1},n.send(i)}}}},MJyj:function(t,e){},"P/1I":function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("vue-drawer-layout",{ref:"drawer",attrs:{animatable:!0,"content-drawable":!0},on:{"mask-click":t.toggleDrawer}},[a("div",{staticClass:"drawer-content",attrs:{slot:"drawer"},slot:"drawer"},[a("div",{staticClass:"menu-header"},[a("van-icon",{attrs:{name:"points"}}),t._v(" "),a("span",[t._v("看不懂么")])],1),t._v(" "),a("van-cell-group",[a("van-cell",{attrs:{title:"添加商品",to:"/good/add"},on:{click:t.toggleDrawer}}),t._v(" "),a("van-cell",{attrs:{title:"添加分类",to:"/type/add"},on:{click:t.toggleDrawer}}),t._v(" "),a("van-cell",{attrs:{title:"退出登录",url:"/admin/user/logout"},on:{click:t.toggleDrawer}})],1)],1),t._v(" "),a("div",{staticClass:"flex-scroll-view",attrs:{slot:"content"},slot:"content"},[a("van-nav-bar",{staticClass:"scroll-header",attrs:{title:"傻逼管理后台"}},[a("van-icon",{attrs:{slot:"left",name:"wap-nav"},on:{click:t.toggleDrawer},slot:"left"}),t._v(" "),"home"==t.rightType?a("van-icon",{attrs:{slot:"right",name:"home"},on:{click:function(e){t.$router.push("/")}},slot:"right"}):t._e(),t._v(" "),"search"==t.rightType?a("van-icon",{attrs:{slot:"right",name:"search"},on:{click:function(e){t.$router.app.$emit("toggleSearch")}},slot:"right"}):t._e()],1),t._v(" "),a("div",{staticClass:"scroll-view"},[a("router-view")],1)],1)])],1)},n=[]},R6Uu:function(t,e){},Tjjm:function(t,e,a){"use strict";var i=a("mtWM");a.n(i);e.a={name:"z-type",props:{inject:{type:Object,required:!0}},data:function(){return{items:[],mainActive:0,activeId:-1}},mounted:function(){},methods:{navSelect:function(t){this.mainActive=t,this.$emit("navclick",t)},itemClick:function(t){this.activeId=t.id,this.$emit("itemclick",t),this.cancel()},cancel:function(){this.$emit("cancel")}}}},bB8X:function(t,e,a){"use strict";function i(t){a("cps3")}var n=a("ztXL"),s=a("g62u"),o=a("XyMi"),c=i,l=Object(o.a)(n.a,s.a,s.b,!1,c,"data-v-866eb62e",null);e.a=l.exports},bX3v:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-type-edit"},[a("div",{staticClass:"cell-title"},[t._v("分类名称：")]),t._v(" "),a("van-field",{attrs:{placeholder:"选择分类名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),t._m(0),t._v(" "),a("van-cell",{attrs:{"is-link":"",value:"点击修改"},on:{click:function(e){t.popupShow=!0}}},[a("template",{slot:"title"},[a("span",{staticClass:"van-cell-text"},[t._v("当前分类")]),t._v(" "),a("van-tag",{attrs:{plain:"",type:"primary"}},[t._v(t._s(t.typeLabel))])],1)],2),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.popupShow,callback:function(e){t.popupShow=e},expression:"popupShow"}},[a("van-picker",{attrs:{"show-toolbar":"",title:"选择","value-key":"name",columns:t.typeData},on:{cancel:t.onCancel,confirm:t.onConfirm}})],1),t._v(" "),a("div",{staticClass:"filed-wrap bottom-btn"},[a("van-button",{staticClass:"submit",attrs:{type:"primary",disabled:t.formStatus,loading:t.posting,block:""},on:{click:t.submit}},[t._v("提交")])],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cell-title"},[t._v("父级分类："),a("small",[t._v("（若不选择，默认为顶级分类）")])])}]},bb5T:function(t,e){},c00c:function(t,e,a){"use strict";function i(t){a("6Gqv")}var n=a("CyuY"),s=a("bX3v"),o=a("XyMi"),c=i,l=Object(o.a)(n.a,s.a,s.b,!1,c,null,null);e.a=l.exports},cdS4:function(t,e){},cps3:function(t,e){},dCOM:function(t,e){},g62u:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-list"},[a("van-list",{staticClass:"good-list",attrs:{finished:t.finished},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.list,function(e){return a("van-cell-swipe",{key:e.id,attrs:{"right-width":65,"on-close":t.onClose}},[a("van-cell-group",[a("van-cell",{attrs:{to:"/good/edit/"+e.id}},[a("div",{staticClass:"fx list-item"},[a("div",{staticClass:"fx fx-hc fx-mc fx-none img"},[a("img",{attrs:{src:e.image,alt:""}})]),t._v(" "),a("div",{staticClass:"cont fx-auto fx fx-dc"},[a("p",[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"type-level"},[a("span",[t._v(t._s(t.zType.map[e.type].name))])]),t._v(" "),a("div",{staticClass:"span"},[a("span",[t._v("¥"+t._s(e.price))]),t._v(" "),""!==e.o_price?a("del",[t._v("¥"+t._s(e.o_price))]):t._e()])])])])],1),t._v(" "),a("span",{staticClass:"action fx fx-dc fx-hc fc-vc del",attrs:{slot:"right"},slot:"right"},[a("span",[t._v("下架")])])],1)})),t._v(" "),a("van-popup",{attrs:{position:"right",overlay:!0},on:{"click-overlay":t.filterCancel},model:{value:t.filter.popup,callback:function(e){t.$set(t.filter,"popup",e)},expression:"filter.popup"}},[a("div",{staticClass:"filter-wrap"},[a("div",{staticClass:"flex-wrap"},[a("div",{staticClass:"flex-scroll"},[a("div",{staticClass:"filter-bar"},[a("van-search",{attrs:{placeholder:"请输入搜索关键词"},model:{value:t.filter.word,callback:function(e){t.$set(t.filter,"word",e)},expression:"filter.word"}}),t._v(" "),a("van-cell",{attrs:{"is-link":"",value:"点击修改"},on:{click:function(e){t.zType.status=!0}}},[a("template",{slot:"title"},[a("span",{staticClass:"van-cell-text"},[t._v("分类：")]),t._v(" "),a("van-tag",{attrs:{plain:"",type:"primary"}},[t._v(t._s(t.zType.label))])],1)],2),t._v(" "),a("div",{staticClass:"cell-title"},[t._v("文章状态:")]),t._v(" "),a("div",{staticClass:"label-tab-group"},[a("div",{staticClass:"label-tab van-hairline",class:{on:"1"==t.filter.status.id},attrs:{"data-id":"1"},on:{click:t.statusFilter}},[t._v("发布")]),t._v(" "),a("div",{staticClass:"label-tab van-hairline",class:{on:"0"==t.filter.status.id},attrs:{"data-id":"0"},on:{click:t.statusFilter}},[t._v("未发布")]),t._v(" "),a("div",{staticClass:"label-tab van-hairline",class:{on:"-1"==t.filter.status.id},attrs:{"data-id":"-1"},on:{click:t.statusFilter}},[t._v("删除")]),t._v(" "),a("div",{staticClass:"label-tab van-hairline",class:{on:""==t.filter.status.id},attrs:{"data-id":""},on:{click:t.statusFilter}},[t._v("所有")])])],1)]),t._v(" "),a("div",{staticClass:"flex-freeze"},[a("div",{staticClass:"btn-group"},[a("a",{attrs:{href:"javascript:;"},on:{click:t.filterCancel}},[t._v("取消")]),t._v(" "),a("a",{attrs:{href:"javascript:;"}},[t._v("筛选")])])])])])]),t._v(" "),a("z-type",{attrs:{inject:t.zType},on:{itemclick:t.typeClick}})],1)},n=[]},itIU:function(t,e){},lXNB:function(t,e){},m7zo:function(t,e){},mLTM:function(t,e){},qczc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("tcuZ"),n=(a.n(i),a("iMPx")),s=a.n(n),o=a("cnGM"),c=(a.n(o),a("S6j6")),l=a.n(c),r=a("QP/A"),u=(a.n(r),a("pyxX")),d=a.n(u),v=a("wvM5"),p=(a.n(v),a("MyDk")),f=a.n(p),m=a("dL9u"),h=(a.n(m),a("L00R")),g=a.n(h),y=a("Rv11"),b=(a.n(y),a("TMdk")),_=a.n(b),C=a("tLo2"),k=(a.n(C),a("blRl")),S=a.n(k),x=a("FDxC"),w=(a.n(x),a("w+oK")),M=a.n(w),T=a("2PSJ"),O=(a.n(T),a("A9fu")),U=a.n(O),q=a("uvlK"),E=(a.n(q),a("lxre")),K=a.n(E),j=a("Mcfu"),A=(a.n(j),a("r9aq")),D=a.n(A),J=a("9ULi"),X=(a.n(J),a("lQdh")),L=a.n(X),I=a("eNeO"),N=(a.n(I),a("VcVR")),R=a.n(N),F=a("9eoG"),P=(a.n(F),a("Bzuo")),B=a.n(P),Q=a("jydU"),z=(a.n(Q),a("WQwN")),W=a.n(z),V=a("LDjV"),Y=(a.n(V),a("ueIT")),G=a.n(Y),H=a("/5sW"),Z=a("qmYb"),$=a("/ocq"),tt=a("bB8X"),et=a("4yEd"),at=a("c00c"),it=a("MJyj");a.n(it);a("Fiu+"),H.default.use(G.a),H.default.use(s.a).use(l.a).use(G.a).use(d.a).use(f.a).use(g.a).use(_.a).use(S.a).use(M.a).use(U.a).use(K.a).use(D.a).use(L.a).use(R.a).use(B.a).use(W.a),H.default.use($.a);var nt=new H.default,st=[{path:"/",name:"home",component:tt.a},{path:"/good/add",name:"good_add",component:et.a},{path:"/good/edit/:id",name:"good_edit",component:et.a},{path:"/good/list",name:"list",component:tt.a},{path:"/type/add",name:"type_add",component:at.a}],ot=new $.a({routes:st});new H.default({el:"#app",data:{ep:nt},router:ot,render:function(t){return t(Z.a)}})},qmYb:function(t,e,a){"use strict";function i(t){a("lXNB")}var n=a("86PB"),s=a("P/1I"),o=a("XyMi"),c=i,l=Object(o.a)(n.a,s.a,s.b,!1,c,null,null);e.a=l.exports},"u/W6":function(t,e,a){"use strict";var i=a("Tjjm"),n=a("HrUo"),s=a("XyMi"),o=Object(s.a)(i.a,n.a,n.b,!1,null,null,null);e.a=o.exports},wKmI:function(t,e){},xL5C:function(t,e){},y0N0:function(t,e){},ztXL:function(t,e,a){"use strict";var i=a("MHRi"),n=(a.n(i),a("6xqC")),s=a.n(n),o=a("fZjL"),c=a.n(o),l=a("GKy3"),r=(a.n(l),a("4vvA")),u=a.n(r),d=a("bOdI"),v=a.n(d),p=a("mtWM"),f=a.n(p),m=a("u/W6");f.a.defaults.baseURL="",e.a={name:"good_list",components:v()({},m.a.name,m.a),data:function(){return{filter:{popup:!1,word:"",status:{id:1},type:{id:""}},zType:{status:!1,label:"所有分类",map:{},items:[]},list:[],loading:!1,finished:!0}},created:function(){var t=this;this.$router.app.$on("toggleSearch",function(){t.filter.popup=!t.filter.popup})},destroyed:function(){this.$router.app.$off("toggleSearch")},mounted:function(){var t=this;this.loadType().then(function(){console.log("type done"),t.finished=!1})},methods:{loadType:function(){var t=this;return u.a.loading({type:"loading",mask:!0,duration:0,forbidClick:!0,message:"获取分类信息"}),f.a.get("/admin/type/getTypes").then(function(e){var a=e.data;if(0==a.status){var i=[],n={};a.data.forEach(function(e){t.zType.map[e.id]=e,0==e.pid?(n[e.id]||(n[e.id]={}),n[e.id].text=e.name,n[e.id].children=[]):(n[e.pid]||(n[e.pid]={},n[e.pid].children=[]),n[e.pid].children.push({id:e.id,text:e.name,pid:e.pid}))}),c()(n).forEach(function(t){i.push(n[t])}),t.zType.items=i,u.a.clear()}else u.a.fail(a.message)}).catch(function(t){u()({type:"text",message:"获取分类失败，请刷新页面"})})},onClose:function(t,e){switch(t){case"left":case"cell":case"outside":e.close();break;case"right":s.a.confirm({message:"确定删除吗？"}).then(function(){e.close()})}},onLoad:function(){var t=this;f.a.get("/admin/good/list").then(function(e){var a=e.data;0==a.status?(a.data.length<20&&(t.finished=!0),t.list=t.list.concat(a.data)):t.finished=!0}).catch(function(e){t.finished=!0}).finally(function(){t.loading=!1})},typeClick:function(t){this.zType.label=t.text,this.filter.type.id=t.id,this.zType.status=!1},statusFilter:function(t){var e=t.currentTarget.dataset.id;this.filter.status.id=e},filterCancel:function(t){this.filter.popup=!1}}}}},["qczc"]);
//# sourceMappingURL=admin.546f5033e66426afe3a7.js.map